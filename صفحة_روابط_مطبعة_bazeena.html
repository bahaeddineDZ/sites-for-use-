<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“š Ù…ÙƒØªØ¨ØªÙŠ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ - Ø¨Ù‡Ø§Ø¡</title>
  <style>
    body {
      font-family: "Tahoma", sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }
    .inputs {
      width: 100%;
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    input {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
    }
    button {
      background: #2980b9;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      transition: 0.3s;
    }
    button:hover {
      background: #1f6390;
    }
    .card {
      position: relative;
      width: 200px;
      height: 250px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      background: white;
      overflow: hidden;
      transition: 0.2s;
    }
    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }
    .card-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 8px;
      text-align: center;
    }
    .actions {
      margin-top: 5px;
    }
    .actions button {
      background: #c0392b;
      margin: 2px;
    }
    .drag-handle {
      position: absolute;
      top: 5px;
      right: 5px;
      width: 20px;
      height: 20px;
      background: #2980b9;
      border-radius: 4px;
      cursor: move;
    }
    .resize-handle {
      position: absolute;
      bottom: 5px;
      left: 5px;
      width: 15px;
      height: 15px;
      background: #27ae60;
      clip-path: polygon(0 100%, 100% 100%, 0 0);
      cursor: nwse-resize;
    }

    /* ğŸ”¹ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 300px;
      text-align: center;
    }
    .modal-content input {
      width: 100%;
      margin: 8px 0;
    }
    .modal-buttons {
      margin-top: 15px;
      display: flex;
      justify-content: space-between;
    }
    .modal-buttons button {
      flex: 1;
      margin: 0 5px;
    }
  </style>
</head>
<body>
  <header>ğŸ“š Ù…ÙƒØªØ¨ØªÙŠ Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ - Ø¨Ù‡Ø§Ø¡</header>
  <div class="container">
    <div class="inputs">
      <input type="text" id="siteName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹">
      <input type="url" id="siteUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (https://)">
      <input type="file" id="siteImage" accept="image/*">
      <button onclick="addSite()">â• Ø¥Ø¶Ø§ÙØ©</button>
    </div>
    <div id="siteList" class="cards"></div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
      <input type="text" id="editName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹">
      <input type="url" id="editUrl" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø·">
      <input type="file" id="editImage" accept="image/*">
      <div class="modal-buttons">
        <button onclick="saveEdit()">ğŸ’¾ Ø­ÙØ¸</button>
        <button onclick="closeModal()">âŒ Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </div>
  </div>

  <script>
    const siteList = document.getElementById("siteList");
    let editIndex = null;

    function loadSites() {
      const sites = JSON.parse(localStorage.getItem("sites") || "[]");
      siteList.innerHTML = "";
      sites.forEach((site, index) => {
        const card = document.createElement("div");
        card.className = "card";
        card.style.left = site.left || "0px";
        card.style.top = site.top || "0px";
        card.style.width = site.width || "200px";
        card.style.height = site.height || "250px";
        card.style.position = "absolute";

        const img = document.createElement("img");
        img.src = site.image || "https://via.placeholder.com/200x250";
        img.onclick = () => window.open(site.url, "_blank");

        const content = document.createElement("div");
        content.className = "card-content";
        content.innerHTML = `<div>${site.name}</div>
                             <div class="actions">
                               <button onclick="openEdit(${index})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                               <button onclick="deleteSite(${index})">ğŸ—‘ Ø­Ø°Ù</button>
                             </div>`;

        const dragHandle = document.createElement("div");
        dragHandle.className = "drag-handle";

        const resizeHandle = document.createElement("div");
        resizeHandle.className = "resize-handle";

        card.appendChild(img);
        card.appendChild(content);
        card.appendChild(dragHandle);
        card.appendChild(resizeHandle);

        enableDragResize(card, index);

        siteList.appendChild(card);
      });
    }

    function addSite() {
      const name = document.getElementById("siteName").value.trim();
      const url = document.getElementById("siteUrl").value.trim();
      const file = document.getElementById("siteImage").files[0];

      if (!name || !url) {
        alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø±Ø§Ø¨Ø·");
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        const sites = JSON.parse(localStorage.getItem("sites") || "[]");
        sites.push({ name, url, image: e.target.result });
        localStorage.setItem("sites", JSON.stringify(sites));
        loadSites();
      };
      if (file) {
        reader.readAsDataURL(file);
      } else {
        const sites = JSON.parse(localStorage.getItem("sites") || "[]");
        sites.push({ name, url });
        localStorage.setItem("sites", JSON.stringify(sites));
        loadSites();
      }
    }

    function deleteSite(index) {
      const sites = JSON.parse(localStorage.getItem("sites") || "[]");
      sites.splice(index, 1);
      localStorage.setItem("sites", JSON.stringify(sites));
      loadSites();
    }

    function openEdit(index) {
      const sites = JSON.parse(localStorage.getItem("sites") || "[]");
      const site = sites[index];
      editIndex = index;
      document.getElementById("editName").value = site.name;
      document.getElementById("editUrl").value = site.url;
      document.getElementById("editModal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("editModal").style.display = "none";
    }

    function saveEdit() {
      const sites = JSON.parse(localStorage.getItem("sites") || "[]");
      const site = sites[editIndex];
      site.name = document.getElementById("editName").value.trim();
      site.url = document.getElementById("editUrl").value.trim();

      const file = document.getElementById("editImage").files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          site.image = e.target.result;
          localStorage.setItem("sites", JSON.stringify(sites));
          loadSites();
        };
        reader.readAsDataURL(file);
      } else {
        localStorage.setItem("sites", JSON.stringify(sites));
        loadSites();
      }
      closeModal();
    }

    function enableDragResize(card, index) {
      const dragHandle = card.querySelector(".drag-handle");
      const resizeHandle = card.querySelector(".resize-handle");

      dragHandle.addEventListener("mousedown", (e) => {
        e.preventDefault();
        let shiftX = e.clientX - card.getBoundingClientRect().left;
        let shiftY = e.clientY - card.getBoundingClientRect().top;

        function moveAt(pageX, pageY) {
          card.style.left = pageX - shiftX + "px";
          card.style.top = pageY - shiftY + "px";
        }

        function onMouseMove(ev) {
          moveAt(ev.pageX, ev.pageY);
        }

        document.addEventListener("mousemove", onMouseMove);
        document.addEventListener("mouseup", () => {
          document.removeEventListener("mousemove", onMouseMove);
          saveCardPosition(card, index);
        }, { once: true });
      });

      resizeHandle.addEventListener("mousedown", (e) => {
        e.preventDefault();
        const startX = e.clientX;
        const startY = e.clientY;
        const startWidth = parseInt(window.getComputedStyle(card).width, 10);
        const startHeight = parseInt(window.getComputedStyle(card).height, 10);

        function onMouseMove(ev) {
          const newWidth = startWidth - (ev.clientX - startX);
          const newHeight = startHeight - (ev.clientY - startY);
          if (newWidth > 100 && newHeight > 100) {
            card.style.width = newWidth + "px";
            card.style.height = newHeight + "px";
          }
        }

        function onMouseUp() {
          document.removeEventListener("mousemove", onMouseMove);
          saveCardPosition(card, index);
        }

        document.addEventListener("mousemove", onMouseMove);
        document.addEventListener("mouseup", onMouseUp, { once: true });
      });
    }

    function saveCardPosition(card, index) {
      const sites = JSON.parse(localStorage.getItem("sites") || "[]");
      sites[index].left = card.style.left;
      sites[index].top = card.style.top;
      sites[index].width = card.style.width;
      sites[index].height = card.style.height;
      localStorage.setItem("sites", JSON.stringify(sites));
    }

    loadSites();
  </script>
</body>
</html>
